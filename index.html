<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gameclass</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body class="bg-slate-100 text-slate-800">

    <div class="flex h-screen">
        <aside id="main-sidebar" class="bg-slate-800 text-slate-200 p-4 flex flex-col flex-shrink-0">
            <h1 class="flex items-center justify-center text-2xl font-bold text-white text-center mb-10"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-7 h-7 mr-2 flex-shrink-0 text-amber-400"><path fill-rule="evenodd" d="M10.788 3.21c.448-1.077 1.976-1.077 2.424 0l2.082 5.007 5.404.433c1.164.093 1.636 1.545.749 2.305l-4.117 3.527 1.257 5.273c.271 1.136-.964 2.033-1.96 1.425L12 18.354 7.373 21.18c-.996.608-2.231-.29-1.96-1.425l1.257-5.273-4.117-3.527c-.887-.76-.415-2.212.749-2.305l5.404-.433 2.082-5.007z" clip-rule="evenodd" /></svg><span id="main-logo-text" class="menu-text">GAMECLASS</span></h1>
            <nav class="flex flex-col space-y-2">
                <p class="px-4 pt-4 pb-2 text-xs uppercase text-slate-500 menu-text">Mode Game</p>
                <a href="#" id="menu-individu" class="main-menu-item flex items-center py-2 px-4 rounded-lg transition-colors duration-200 hover:bg-slate-700 active"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-3 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" /></svg><span class="menu-text">Game Individu</span></a>
                <a href="#" id="menu-grup" class="main-menu-item flex items-center py-2 px-4 rounded-lg transition-colors duration-200 hover:bg-slate-700"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-3 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.653-.122-1.28-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.653.122-1.28.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" /></svg><span class="menu-text">Game Grup</span></a>
                <a href="#" id="menu-fortune-wheel" class="main-menu-item flex items-center py-2 px-4 rounded-lg transition-colors duration-200 hover:bg-slate-700"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-3 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15.552 8.052a3.375 3.375 0 015.254 0 3.375 3.375 0 010 5.254M4.194 18.948a3.375 3.375 0 010-5.254 3.375 3.375 0 015.254 0M18.948 4.194a3.375 3.375 0 010 5.254 3.375 3.375 0 01-5.254 0M8.052 15.552a3.375 3.375 0 01-5.254 0 3.375 3.375 0 010-5.254M12 18.75a.75.75 0 00.75-.75V12a.75.75 0 00-1.5 0v6a.75.75 0 00.75.75z" /><path stroke-linecap="round" stroke-linejoin="round" d="M12 5.25a.75.75 0 01.75-.75h.01a.75.75 0 01.75.75v.01a.75.75 0 01-.75.75h-.01a.75.75 0 01-.75-.75V5.25zM18.75 12a.75.75 0 00-.75.75v.01a.75.75 0 001.5 0V12a.75.75 0 00-.75-.75zM5.25 12a.75.75 0 01-.75.75v.01a.75.75 0 011.5 0V12a.75.75 0 01-.75-.75z" /></svg><span class="menu-text">Roda Keberuntungan</span></a>
                <a href="#" id="menu-timer" class="main-menu-item flex items-center py-2 px-4 rounded-lg transition-colors duration-200 hover:bg-slate-700"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-3 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" /></svg><span class="menu-text">Timer</span></a>

                <p class="px-4 pt-4 pb-2 text-xs uppercase text-slate-500 menu-text">Manajemen</p>
                <a href="#" id="menu-sesi-baru" class="main-menu-item flex items-center py-2 px-4 rounded-lg transition-colors duration-200 hover:bg-slate-700"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-3 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9 13h6m-3-3v6m5 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" /></svg><span class="menu-text">Sesi Baru (Excel)</span></a>
                <a href="#" id="menu-lanjutkan-sesi" class="main-menu-item flex items-center py-2 px-4 rounded-lg transition-colors duration-200 hover:bg-slate-700"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-3 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12" /></svg><span class="menu-text">Lanjutkan Sesi</span></a>
                <a href="#" id="menu-simpan-sesi" class="main-menu-item flex items-center py-2 px-4 rounded-lg transition-colors duration-200 hover:bg-slate-700"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-3 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" /></svg><span class="menu-text">Simpan Sesi</span></a>
                <a href="#" id="menu-pengaturan" class="main-menu-item flex items-center py-2 px-4 rounded-lg transition-colors duration-200 hover:bg-slate-700"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-3 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" /><path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" /></svg><span class="menu-text">Pengaturan</span></a>
            </nav>
            <div class="mt-auto pt-4 border-t border-slate-700 flex flex-col items-center justify-center">
                <footer class="mb-2 text-xs text-center text-slate-500 menu-text">Made with ❤️ ©️tamawith.ai 2025</footer>
                <button id="sidebar-toggle" type="button" class="text-slate-400 hover:text-white hover:bg-slate-700 focus:outline-none rounded-lg text-sm p-2.5"><svg id="sidebar-toggle-close-icon" class="hidden w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg><svg id="sidebar-toggle-open-icon" class="hidden w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg></button>
            </div>
        </aside>

        <div id="main-content" class="flex-1 overflow-hidden">
            
            <div id="panel-individu" class="flex h-full">
                <main class="flex-1 flex flex-col p-4 sm:p-6 lg:p-8 overflow-y-auto">
                    <header class="mb-6"><h1 class="text-3xl font-bold text-slate-800">Panel Partisipasi</h1><p class="text-slate-500">Pilih peserta, lalu berikan poin & raih badge!</p></header>
                    <div id="peserta-grid" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-5 flex-1"></div>
                    <div id="controls-panel" class="mt-6 p-4 bg-white rounded-xl shadow-lg"><h3 id="controls-title" class="text-lg font-semibold text-center text-slate-600 mb-3">Muat data peserta atau pilih peserta.</h3><div id="point-buttons-container" class="flex flex-wrap justify-center gap-3"></div></div>
                </main>
                <aside class="w-80 bg-white/50 p-6 flex flex-col border-l border-slate-200 flex-shrink-0">
                    <div class="flex-1 flex flex-col min-h-0"><h2 class="text-2xl font-bold mb-4 text-slate-800 text-center flex-shrink-0">🏆 Papan Peringkat</h2><div id="leaderboard-sidebar" class="scroll-panel flex-grow overflow-y-auto pr-2 space-y-3"></div></div>
                    <div class="flex-1 flex flex-col min-h-0 mt-6 pt-6 border-t border-slate-200"><h2 class="text-2xl font-bold mb-4 text-slate-800 text-center flex-shrink-0">🏅 Badge Diraih</h2><div id="badge-panel-sidebar" class="scroll-panel flex-grow overflow-y-auto pr-2 space-y-3"></div></div>
                </aside>
            </div>

            <div id="panel-grup" class="hidden h-full flex flex-col bg-slate-900 text-white">
                <div id="setup-screen" class="p-8 max-w-2xl mx-auto my-auto"><h1 class="text-4xl font-extrabold text-center mb-2">🏁 Amazing Race</h1><p class="text-center text-slate-400 mb-8">Atur tim dan ikon untuk memulai balapan!</p><form id="setup-form" class="bg-slate-800 p-8 rounded-2xl shadow-2xl"><div class="mb-6"><label for="team-count" class="block mb-2 text-sm font-medium text-slate-300">Jumlah Tim (2-8)</label><input type="number" id="team-count" value="2" min="2" max="8" class="bg-slate-700 border border-slate-600 text-white text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"></div><div id="team-details-container" class="space-y-4 mb-8"></div><button type="submit" class="w-full text-white bg-blue-600 hover:bg-blue-700 focus:ring-4 focus:outline-none focus:ring-blue-800 font-bold rounded-lg text-lg px-5 py-3 text-center">Mulai Balapan!</button></form></div>
                <div id="race-screen" class="hidden p-4 sm:p-8 h-full flex flex-col"><header class="flex justify-between items-center mb-6 flex-shrink-0"><h1 class="text-3xl font-extrabold">Race in Progress</h1><button id="reset-race-btn" class="bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-lg">Reset & Mulai Baru</button></header><main id="race-tracks" class="flex-grow space-y-4 overflow-y-auto pr-4"></main><footer id="race-controls" class="pt-6 border-t border-slate-700 mt-4 flex-shrink-0"><h2 class="text-center font-bold mb-3">Kontrol Poin</h2><div id="control-buttons" class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-8 gap-4"></div></footer></div>
            </div>

             <div id="panel-fortune-wheel" class="hidden h-full flex flex-col items-center justify-center p-8 bg-gray-200">
                <h1 class="text-4xl font-extrabold text-slate-800 mb-4">Roda Keberuntungan</h1>
                <div id="wheel-container" class="relative"><canvas id="wheelCanvas" width="500" height="500"></canvas><div class="absolute top-0 left-1/2 -translate-x-1/2" style="filter: drop-shadow(0px 4px 3px rgba(0,0,0,0.3));"><svg width="30" height="45" viewBox="0 0 30 45" xmlns="http://www.w3.org/2000/svg"><polygon points="15,45 0,0 30,0" fill="white"/></svg></div></div>
                <button id="spin-btn" class="mt-8 bg-blue-600 text-white font-bold py-4 px-10 rounded-full text-xl shadow-lg hover:bg-blue-700 disabled:bg-slate-400 disabled:cursor-not-allowed">Putar Roda!</button>
             </div>
             
             <div id="panel-timer" class="flex h-full flex-col items-center justify-center p-8 bg-slate-800 text-white">
                <div id="timer-wrapper" class="text-center">
                    <div id="timer-display" class="font-mono text-9xl font-black mb-6">00:00</div>
                    <div id="timer-controls-wrapper">
                        <h1 class="text-3xl font-bold mb-4">Pengatur Waktu</h1>
                        <div class="flex items-center justify-center gap-4 mb-6">
                            <button data-time="60" class="timer-set-btn bg-sky-500 hover:bg-sky-600 font-bold py-2 px-4 rounded-lg">1 Menit</button>
                            <button data-time="300" class="timer-set-btn bg-sky-500 hover:bg-sky-600 font-bold py-2 px-4 rounded-lg">5 Menit</button>
                            <button data-time="600" class="timer-set-btn bg-sky-500 hover:bg-sky-600 font-bold py-2 px-4 rounded-lg">10 Menit</button>
                        </div>
                        <div class="flex items-center justify-center gap-4 mb-8">
                            <label for="custom-time-input">Kustom (menit):</label>
                            <input type="number" id="custom-time-input" min="1" class="bg-slate-700 border border-slate-600 rounded-lg w-24 p-2 text-center">
                            <button id="custom-time-btn" class="bg-indigo-500 hover:bg-indigo-600 font-bold py-2 px-4 rounded-lg">Atur</button>
                        </div>
                        <div class="flex items-center justify-center gap-4">
                            <button id="timer-toggle-btn" class="bg-green-600 hover:bg-green-700 font-bold py-3 px-6 rounded-lg text-lg w-32">Mulai</button>
                            <button id="timer-reset-btn" class="bg-red-600 hover:bg-red-700 font-bold py-3 px-6 rounded-lg text-lg">Reset</button>
                            <button id="timer-fullscreen-btn" class="bg-gray-500 hover:bg-gray-600 font-bold p-3 rounded-lg"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M4 8V4m0 0h4M4 4l5 5m11-1v4m0 0h-4m4-4l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4" /></svg></button>
                        </div>
                    </div>
                </div>
             </div>

        </div>
    </div>

    <div id="upload-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-40 flex items-center justify-center p-4"><div class="bg-white rounded-xl shadow-2xl p-8 w-full max-w-lg relative modal-enter"><button id="close-upload-modal-btn" class="absolute top-4 right-4 text-slate-500 hover:text-slate-800">&times;</button><h2 class="text-2xl font-bold mb-4">Unggah File Data Peserta</h2><div class="bg-blue-100 border-l-4 border-blue-500 text-blue-700 p-4 rounded-r-lg mb-6"><p class="font-bold">Struktur File Excel (.xlsx):</p><ul class="list-disc list-inside mt-2 text-sm"><li>Baris pertama harus berisi judul kolom (Header).</li><li>Kolom A harus berjudul <strong>Nama</strong>.</li><li>Kolom B harus berjudul <strong>Avatar</strong> (berisi link URL gambar).</li></ul></div><input type="file" id="excel-file-input" accept=".xlsx, .xls" class="block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"/><p id="upload-status" class="text-sm mt-4 text-center"></p></div></div>
    <div id="settings-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-40 flex items-center justify-center p-4"><div class="bg-white rounded-xl shadow-2xl p-8 w-full max-w-lg relative modal-enter"><button id="close-settings-modal-btn" class="absolute top-4 right-4 text-slate-500 hover:text-slate-800">&times;</button><div id="settings-form-content"></div></div></div>
    <div id="badge-modal" class="hidden fixed inset-0 bg-black bg-opacity-60 z-50 flex items-center justify-center p-4"><div class="bg-white rounded-2xl shadow-2xl p-8 w-full max-w-sm text-center relative modal-enter"><div id="badge-icon-container" class="text-7xl mb-4"></div><p class="text-lg text-slate-500">Selamat kepada</p><h2 id="badge-participant-name" class="text-3xl font-bold my-2"></h2><p class="text-lg text-slate-500">telah meraih badge</p><h3 id="badge-name" class="text-2xl font-bold text-blue-500 mt-2"></h3><button id="close-badge-modal-btn" class="mt-8 bg-blue-500 text-white font-bold py-2 px-6 rounded-full hover:bg-blue-600">Lanjutkan!</button></div></div>
    <div id="winner-modal" class="hidden fixed inset-0 bg-black bg-opacity-70 z-50 flex items-center justify-center p-4"><div class="bg-slate-800 border-2 border-amber-400 rounded-2xl shadow-2xl p-8 w-full max-w-md text-center relative modal-enter"><div id="winner-icon" class="text-8xl mb-4 scale-150"></div><p class="text-2xl text-slate-400">Pemenangnya adalah...</p><h2 id="winner-name" class="text-5xl font-black my-4 text-amber-300 uppercase"></h2><button id="restart-from-winner-btn" class="mt-8 bg-blue-600 text-white font-bold py-3 px-8 rounded-full hover:bg-blue-700">Mulai Balapan Baru</button></div></div>
    <div id="wheel-winner-modal" class="hidden fixed inset-0 bg-black bg-opacity-70 z-50 flex items-center justify-center p-4"><div class="bg-white rounded-2xl shadow-2xl p-12 w-full max-w-md text-center relative modal-enter"><img id="wheel-winner-avatar" src="" class="w-32 h-32 rounded-full object-cover mx-auto mb-4 border-4 border-amber-400 shadow-lg"><h2 id="wheel-winner-name" class="text-4xl font-black my-4 text-slate-800"></h2><button id="close-wheel-winner-btn" class="mt-8 bg-blue-600 text-white font-bold py-3 px-8 rounded-full hover:bg-blue-700">Tutup</button></div></div>

    <script src="js/config.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/sesi.js"></script>
    <script src="js/game-individu.js"></script>
    <script src="js/game-grup.js"></script>
    <script src="js/fortune-wheel.js"></script>
    <script src="js/timer.js"></script>
    <script src="js/main.js"></script>
</body>
</html>